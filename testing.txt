EcoSim (Alpha) Unit Tests 

Goals
------
1) Verify the loadWorld correctly:
   - Opens a valid file and returns false if the file is missing.
   - Parses GRID, PARAM, and CELL records.
   - Ignores comments (# ...), including inline comments after records.
   - Populates the map with correct counts for Plants/Herbivores/Predators.
   - Updates globals: GRID_ROWS, GRID_COLS, STEPS, plantGrowth, herbBirth, predBirth, starvationSteps, migrateRate.

2) Verify key helper:
   - keyForCell(r,c) produces a stable, unique key string "rXcY".

3) Verify one simulation step (simStep):
   - Plants increase by max(1, floor(plantGrowth * P)) when P>0, then are eaten by herbivores.
   - Herbivores starve (every 3rd unfed removed) and reproduce (floor(herbBirth * fed)).
   - Predators eat herbivores (1 per predator), starve (every 2nd unfed removed), and reproduce (floor(predBirth * eaten)).

Approach
--------
• Use ofstream to write a small model file (no stringstreams).
• Load using loadWorld (ifstream).
• Compare results using a simple expectEqual() that prints PASS/FAIL and tracks a failure count.
• Also build a tiny in-memory 1×1 world, run simStep once, and check post-step counts.
• Exit code: 0 if all tests pass; non-zero if any check fails.

// simple test driver: will verify through console output 

int main() {
    cout << "EcoSim Unit Test\n";
    EcoMap testEco;

    // Test 1: keyForCell
    string key = keyForCell(3, 7);
    cout << "Test 1 - keyForCell(3,7): " << key << endl;

    // Test 2: popList
    list<string> plants;
    popList(plants, "P", 5);
    cout << "Test 2 - popList(): added " << plants.size() << " items (expected 5)\n";

    // Test 3: loadWorld simulation
    ifstream fin("ecosim.txt");
    if (fin.good()) {
        cout << "Test 3 - File opened successfully.\n";
        string firstWord;
        fin >> firstWord;
        cout << "First word in file: " << firstWord << endl;
        fin.close();
    } else {
        cout << "Test 3 - File not found. Please ensure ecosim.txt is present.\n";
    }

    // Test 4: Map population check
    testEco[keyForCell(0,0)][0].push_back("P");
    testEco[keyForCell(0,0)][1].push_back("H");
    testEco[keyForCell(0,0)][2].push_back("R");
    cout << "Test 4 - Map entry counts (P,H,R): "
         << testEco["r0c0"][0].size() << ", "
         << testEco["r0c0"][1].size() << ", "
         << testEco["r0c0"][2].size() << endl;

    cout << "Unit testing complete.\n";
    return 0;
}